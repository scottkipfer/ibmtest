
/****************************************************************************************
 *                                      server.js
 ****************************************************************************************/

/****************************************************************************************
 *                                      Modules
 ****************************************************************************************/
var dotenv = require('dotenv');
var http = require('http');
var bodyParser = require('body-parser');
var express = require('express');
var morgan = require('morgan');
dotenv.load();

/****************************************************************************************
 *                                      Variables
 ****************************************************************************************/
var port = process.env.PORT;

/****************************************************************************************
 *                                     Connect to Database
 ****************************************************************************************/
require('./server/database/db-connect');

/****************************************************************************************
 *                                    Express Configure
 ****************************************************************************************/
var app = express();
app.use(express.static(__dirname + '/public',{redirect: false}));
app.use(morgan("dev"));
app.use(bodyParser.json({limit: '50mb'}));
app.set('view engine','html');

/****************************************************************************************
 *                                Handle Angular Requests
 ****************************************************************************************/
require('./server/routes.js')(app);

/****************************************************************************************
 *                                Handle Angular Requests
 ****************************************************************************************/
app.get('*', function (req, res) {
    res.sendFile(__dirname + '/public/main/index.html');
});

/****************************************************************************************
 *                                    Launch Server
 ****************************************************************************************/
app.listen(port);
console.log("listening on port: " + port);
